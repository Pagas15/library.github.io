const CONSTS={api:{arbi:"https://home.scaletrk.com/signup/affiliate",autor:"https://home.scaletrk.com/signup/advertiser"}},header=()=>{const e=document.querySelector(".header");if(e){e.querySelector(".header__btn").addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("active")?(e.classList.remove("active"),document.body.style.overflow="auto"):(e.classList.add("active"),document.body.style.overflow="hidden")}))}},sliders=()=>{const e=e=>{const t=document.querySelector(e);if(t){const e=t.querySelector(".swiperWrapper"),a=t.querySelectorAll(".swiperSlide");e.classList.add("swiper-wrapper"),e.classList.remove("swiperWrapper"),a.forEach((e=>{e.classList.add("swiper-slide"),e.classList.remove("swiperSlide")}))}};if(window.innerWidth<767){e(".swiper1"),e(".swiper2"),e(".swiper3");new Swiper(".swiper1",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination1",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper2",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination2",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper3",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination3",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}})}},modal=()=>{const e=document.querySelector("[data-modal-wrapper]");if(e){const t=document.querySelectorAll("[data-modal-btn-open]"),a=document.querySelectorAll("[data-modal-btn-close]"),r=e.querySelectorAll("[data-modal-window]"),s={};r.forEach((e=>{s[e.dataset.modalWindow]=e}));let n=null;const l=()=>{document.body.style.overflow="auto";for(let e in s)s[e].classList.remove("active")},o=()=>{e.classList.remove("active"),n=null,l()},c=t=>{null===n?(n=t,s[t].classList.add("active"),e.classList.add("active"),document.body.style.overflow="hidden"):n!==t?(l(),n=t,s[t].classList.add("active"),document.body.style.overflow="hidden"):n===t&&o()};return t.forEach((e=>{const t=e.dataset.modalBtnOpen;e.addEventListener("click",(e=>{c(t)}))})),a.forEach((e=>{e.addEventListener("click",o)})),e.addEventListener("click",(t=>{t.target===e&&o()})),{closeOllModal:l,closeModal:o,openModal:c}}},request=async({url:e,method:t="GET",data:a=null,callBack:r})=>{try{const s={};let n;a&&(s["Content-Type"]="application/json",n=JSON.stringify(a));const l=await fetch(e,{method:t,headers:s,body:n}),o=await l.json();if(!r)return o;r(o)}catch(e){console.warn("Error: ",e.message)}},inputMasks2={email:/^[^ ]+@[^ ]+\.[a-z]{2,3}$/,password:/^(?=.*[A-Z].*[A-Z])(?=.*[!@#$&*])(?=.*[0-9].*[0-9])(?=.*[a-z].*[a-z].*[a-z]).{8,}$/,telegram:/^@[A-Za-z0-9_-]{3,16}$/},createError=(e="Please Enter Valid")=>{let t=document.createElement("p");return t.className="txt25x29 cRed textError",t.innerHTML=e,t},checkOut=(e,t,a)=>{const r=!!e.lastChild?.classList?.contains("textError");t?r&&e.removeChild(e.lastChild):r||e.appendChild(a)},checkInput={name:(e,t=!1)=>{const a=e.closest(".inputBox"),r=createError("Как минимум 2 символов"),s=()=>checkOut(a,e.value.length>=2,r);if(!t)return s(),e.value.length>=2;e.addEventListener("input",s)},email:(e,t=!1)=>{const a=e.closest(".inputBox"),r=createError("Укажите валидную электронную почту"),s=()=>checkOut(a,!!e.value.match(inputMasks2.email),r);if(!t)return s(),!!e.value.match(inputMasks2.email);e.addEventListener("input",s)},telegram:(e,t=!1)=>{const a=e.closest(".inputBox"),r=createError("Пожалуйста укажите правильный логин"),s=()=>checkOut(a,!!e.value.match(inputMasks2.telegram),r);if(!t)return s(),!!e.value.match(inputMasks2.telegram);e.addEventListener("input",s)},password:(e,t=!1)=>{const a=e.closest(".inputBox"),r=createError("Минимум 8 символов, заглавные, маленькие, цифры и спецсимволы"),s=()=>checkOut(a,!!e.value.match(inputMasks2.password),r);if(!t)return s(),!!e.value.match(inputMasks2.password);e.addEventListener("input",s)},passwordRepeat:(e,t=!1)=>{const a=e.closest(".inputBox"),r=createError("Пароли должны совпадать"),s=document.querySelector(`[data-main-pass="${e.dataset.repeatPass}"]`),n=()=>checkOut(a,s.value===e.value,r);if(!t)return n(),s.value===e.value;e.addEventListener("input",n)},text:()=>!0},inputsOll=()=>{document.querySelectorAll("input").forEach((e=>{const t=e.name;checkInput[t](e,!0)}))},inputsForms=e=>{const t=t=>{"success"===t?.status?e.openModal("successfully"):e.openModal("error")};(()=>{const e=document.querySelector('[data-form-btn="arbit1"]'),a=document.querySelectorAll('[data-form-input="arbit1"]');e.addEventListener("click",(()=>{let e=[];if(a.forEach((t=>{e.push({key:t.name,value:t.value,isValid:checkInput[t.name](t)})})),e.every((e=>!0===e.isValid))){const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,contacts:`[{"type":5,"account":${e.find((e=>"telegram"===e.key)).value},"title":"Telegram"}]`};request({url:CONSTS.api.arbi,method:"POST",data:a,callBack:e=>{t(e)}})}}))})(),(()=>{const a=document.querySelector('[data-form-btn="autor1"]'),r=document.querySelector('[data-form-btn-pre="autor1"]'),s=document.querySelectorAll('[data-form-input="autor1"]'),n=(e,t=(()=>{}))=>{let a=[];s.forEach((e=>{a.push({key:e.name,value:e.value,isValid:checkInput[e.name](e)})})),a.every((e=>!0===e.isValid))?e(a):t()};r.addEventListener("click",(()=>{n((()=>{e.openModal("autor2")}))})),a.addEventListener("click",(()=>{n((e=>{const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,contacts:`[{"type":5,"account":${e.find((e=>"telegram"===e.key)).value},"title":"Telegram"}]`,notes:e.find((e=>"text"===e.key)).value};console.log(a),request({url:CONSTS.api.autor,method:"POST",data:a,callBack:e=>{t(e)}})}),(()=>{e.openModal("autor1")}))}))})()},init=()=>{header(),sliders();const e=modal();document.querySelectorAll("input").forEach((e=>{const t=e.name;checkInput[t](e,!0)})),inputsForms(e)};window.addEventListener("DOMContentLoaded",init);