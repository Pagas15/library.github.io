const CONSTS={api:{arbi:"https://home.scaletrk.com/signup/affiliate",autor:"https://home.scaletrk.com/signup/advertiser"}},header=()=>{const e=document.querySelector(".header");if(e){e.querySelector(".header__btn").addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("active")?(e.classList.remove("active"),document.body.style.overflow="auto"):(e.classList.add("active"),document.body.style.overflow="hidden")}))}},sliders=()=>{const e=e=>{const t=document.querySelector(e);if(t){const e=t.querySelector(".swiperWrapper"),a=t.querySelectorAll(".swiperSlide");e.classList.add("swiper-wrapper"),e.classList.remove("swiperWrapper"),a.forEach((e=>{e.classList.add("swiper-slide"),e.classList.remove("swiperSlide")}))}};if(window.innerWidth<767){e(".swiper1"),e(".swiper2"),e(".swiper3");new Swiper(".swiper1",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination1",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper2",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination2",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper3",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination3",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}})}},modal=()=>{const e=document.querySelector("[data-modal-wrapper]");if(e){const t=document.querySelectorAll("[data-modal-btn-open]"),a=document.querySelectorAll("[data-modal-btn-close]"),s=e.querySelectorAll("[data-modal-window]"),l={};s.forEach((e=>{l[e.dataset.modalWindow]=e}));let o=null;const n=()=>{document.body.style.overflow="auto";for(let e in l)l[e].classList.remove("active")},r=()=>{e.classList.remove("active"),o=null,n()},i=t=>{null===o?(o=t,l[t].classList.add("active"),e.classList.add("active"),document.body.style.overflow="hidden"):o!==t?(n(),o=t,l[t].classList.add("active"),document.body.style.overflow="hidden"):o===t&&r()};return t.forEach((e=>{const t=e.dataset.modalBtnOpen;e.addEventListener("click",(e=>{i(t)}))})),a.forEach((e=>{e.addEventListener("click",r)})),e.addEventListener("click",(t=>{t.target===e&&r()})),{closeOllModal:n,closeModal:r,openModal:i}}},request=async({url:e,method:t="GET",data:a=null,callBack:s})=>{try{const l={};let o;a&&(l["Content-Type"]="application/json",o=JSON.stringify(a));const n=await fetch(e,{method:t,headers:l,body:o});console.log(e,{method:t,headers:l,body:o});const r=await n.json();if(!s)return r;s(r)}catch(e){console.warn("Error: ",e.message)}},inputsAndForms=e=>{const t=/^[^ ]+@[^ ]+\.[a-z]{2,3}$/,a=/^[A-Za-z0-9_-].{8,}$/,s=/^@[A-Za-z0-9_-]{3,16}$/,l=(e="Please Enter Valid")=>{let t=document.createElement("p");return t.className="txt25x29 cRed textError",t.innerHTML=e,t},o=(e,t,a)=>{const s=!!e.lastChild?.classList?.contains("textError");t?s&&e.removeChild(e.lastChild):s||e.appendChild(a)},n={name:(e,t=!1)=>{const a=e.closest(".inputBox"),s=l("Как минимум 2 символов"),n=()=>o(a,e.value.length>=2,s);if(!t)return n(),e.value.length>=2;e.addEventListener("input",n)},email:(e,a=!1)=>{const s=e.closest(".inputBox"),n=l("Укажите валидную электронную почту"),r=()=>o(s,!!e.value.match(t),n);if(!a)return r(),!!e.value.match(t);e.addEventListener("input",r)},telegram:(e,t=!1)=>{const a=e.closest(".inputBox"),n=l("Пожалуйста укажите правильный логин"),r=()=>o(a,!!e.value.match(s),n);if(!t)return r(),!!e.value.match(s);e.addEventListener("input",r)},password:(e,t=!1)=>{const s=e.closest(".inputBox"),n=l("Минимум 8 символов, латиницей"),r=()=>o(s,!!e.value.match(a),n);if(!t)return r(),!!e.value.match(a);e.addEventListener("input",r)},passwordRepeat:(e,t=!1)=>{const a=e.closest(".inputBox"),s=l("Пароли должны совпадать"),n=document.querySelector(`[data-main-pass="${e.dataset.repeatPass}"]`),r=()=>o(a,n.value===e.value,s);if(!t)return r(),n.value===e.value;e.addEventListener("input",r)},text:()=>!0};document.querySelectorAll("input").forEach((e=>{const t=e.name;n[t](e,!0)})),(e=>{const t=t=>{"success"===t?.status?e.openModal("successfully"):e.openModal("error")};(()=>{const e=document.querySelector('[data-form-btn="arbit1"]'),a=document.querySelectorAll('[data-form-input="arbit1"]');e.addEventListener("click",(()=>{let e=[];if(a.forEach((t=>{e.push({key:t.name,value:t.value,isValid:n[t.name](t)})})),e.every((e=>!0===e.isValid))){const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,custom_fields:JSON.stringify({custom_field_9627:e.find((e=>"telegram"===e.key)).value})};request({url:CONSTS.api.arbi,method:"POST",data:a,callBack:e=>{console.log(e),t(e)}})}}))})(),(()=>{const a=document.querySelector('[data-form-btn="autor1"]'),s=document.querySelector('[data-form-btn-pre="autor1"]'),l=document.querySelectorAll('[data-form-input="autor1"]'),o=(e,t=(()=>{}))=>{let a=[];l.forEach((e=>{a.push({key:e.name,value:e.value,isValid:n[e.name](e)})})),a.every((e=>!0===e.isValid))?e(a):t()};s.addEventListener("click",(()=>{o((()=>{e.openModal("autor2")}))})),a.addEventListener("click",(()=>{o((e=>{const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,custom_fields:JSON.stringify({custom_field_7069:e.find((e=>"telegram"===e.key)).value,custom_field_3938:e.find((e=>"text"===e.key)).value})};request({url:CONSTS.api.autor,method:"POST",data:a,callBack:e=>{t(e)}})}),(()=>{e.openModal("autor1")}))}))})()})(e)},hideLoader=()=>{document.querySelector(".loader").classList.remove("active")},init=()=>{const e=modal();header(),sliders(),inputsAndForms(e),document.querySelector(".loader").classList.remove("active")};window.addEventListener("DOMContentLoaded",init);