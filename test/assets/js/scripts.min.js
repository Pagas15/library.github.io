const CONSTS={api:{arbi:"https://home.scaletrk.com/signup/affiliate",autor:"https://home.scaletrk.com/signup/advertiser"}},header=()=>{const e=document.querySelector(".header");if(e){e.querySelector(".header__btn").addEventListener("click",(t=>{t.preventDefault(),e.classList.contains("active")?(e.classList.remove("active"),document.body.style.overflow="auto"):(e.classList.add("active"),document.body.style.overflow="hidden")}))}},sliders=()=>{const e=e=>{const t=document.querySelector(e);if(t){const e=t.querySelector(".swiperWrapper"),a=t.querySelectorAll(".swiperSlide");e.classList.add("swiper-wrapper"),e.classList.remove("swiperWrapper"),a.forEach((e=>{e.classList.add("swiper-slide"),e.classList.remove("swiperSlide")}))}};if(window.innerWidth<767){e(".swiper1"),e(".swiper2"),e(".swiper3");new Swiper(".swiper1",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination1",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper2",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination2",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}}),new Swiper(".swiper3",{loop:!0,slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,autoplay:{delay:5e3},pagination:{el:".swiper-pagination3",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'"></span>'}}})}},modal=()=>{const e=document.querySelector("[data-modal-wrapper]");if(e){const t=document.querySelectorAll("[data-modal-btn-open]"),a=document.querySelectorAll("[data-modal-btn-close]"),s=e.querySelectorAll("[data-modal-window]"),n={};s.forEach((e=>{n[e.dataset.modalWindow]=e}));let l=null;const o=()=>{document.body.style.overflow="auto";for(let e in n)n[e].classList.remove("active")},r=()=>{e.classList.remove("active"),l=null,o()},i=t=>{null===l?(l=t,n[t].classList.add("active"),e.classList.add("active"),document.body.style.overflow="hidden"):l!==t?(o(),l=t,n[t].classList.add("active"),document.body.style.overflow="hidden"):l===t&&r()};return t.forEach((e=>{const t=e.dataset.modalBtnOpen;e.addEventListener("click",(e=>{i(t)}))})),a.forEach((e=>{e.addEventListener("click",r)})),e.addEventListener("click",(t=>{t.target===e&&r()})),{closeOllModal:o,closeModal:r,openModal:i}}},request=async({url:e,method:t="GET",data:a=null,callBack:s})=>{try{const n={};let l;a&&(n["Content-Type"]="application/json",l=JSON.stringify(a));const o=await fetch(e,{method:t,headers:n,body:l});console.log(e,{method:t,headers:n,body:l});const r=await o.json();if(!s)return r;s(r)}catch(e){console.warn("Error: ",e.message)}},inputsAndForms=e=>{const t=/^[^ ]+@[^ ]+\.[a-z]{2,3}$/,a=/^[A-Za-z0-9_-].{8,}$/,s=/^@[A-Za-z0-9_-]{3,16}$/,n=(e="Please Enter Valid")=>{let t=document.createElement("p");return t.className="txt25x29 cRed textError",t.innerHTML=e,t},l=(e,t,a)=>{const s=!!e.lastChild?.classList?.contains("textError");t?s&&e.removeChild(e.lastChild):s||e.appendChild(a)},o={name:(e,t=!1)=>{const a=e.closest(".inputBox"),s=n("Как минимум 2 символов"),o=()=>l(a,e.value.length>=2,s);if(!t)return o(),e.value.length>=2;e.addEventListener("input",o)},email:(e,a=!1)=>{const s=e.closest(".inputBox"),o=n("Укажите валидную электронную почту"),r=()=>l(s,!!e.value.match(t),o);if(!a)return r(),!!e.value.match(t);e.addEventListener("input",r)},telegram:(e,t=!1)=>{const a=e.closest(".inputBox"),o=n("Пожалуйста укажите правильный логин"),r=()=>l(a,!!e.value.match(s),o);if(!t)return r(),!!e.value.match(s);e.addEventListener("input",r)},password:(e,t=!1)=>{const s=e.closest(".inputBox"),o=n("Минимум 8 символов, латиницей"),r=()=>l(s,!!e.value.match(a),o);if(!t)return r(),!!e.value.match(a);e.addEventListener("input",r)},passwordRepeat:(e,t=!1)=>{const a=e.closest(".inputBox"),s=n("Пароли должны совпадать"),o=document.querySelector(`[data-main-pass="${e.dataset.repeatPass}"]`),r=()=>l(a,o.value===e.value,s);if(!t)return r(),o.value===e.value;e.addEventListener("input",r)},text:()=>!0};document.querySelectorAll("input").forEach((e=>{const t=e.name;o[t](e,!0)})),(e=>{const t=t=>{"success"===t?.status?e.openModal("successfully"):e.openModal("error")};(()=>{const e=document.querySelector('[data-form-btn="arbit1"]'),a=document.querySelectorAll('[data-form-input="arbit1"]');e.addEventListener("click",(()=>{let e=[];if(a.forEach((t=>{e.push({key:t.name,value:t.value,isValid:o[t.name](t)})})),e.every((e=>!0===e.isValid))){const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,custom_fields:JSON.stringify({custom_field_9627:e.find((e=>"telegram"===e.key)).value})};request({url:CONSTS.api.arbi,method:"POST",data:a,callBack:e=>{console.log(e),t(e)}})}}))})(),(()=>{const a=document.querySelector('[data-form-btn="autor1"]'),s=document.querySelector('[data-form-btn-pre="autor1"]'),n=document.querySelectorAll('[data-form-input="autor1"]'),l=(e,t=(()=>{}))=>{let a=[];n.forEach((e=>{a.push({key:e.name,value:e.value,isValid:o[e.name](e)})})),a.every((e=>!0===e.isValid))?e(a):t()};s.addEventListener("click",(()=>{l((()=>{e.openModal("autor2")}))})),a.addEventListener("click",(()=>{l((e=>{const a={email:e.find((e=>"email"===e.key)).value,firstname:e.find((e=>"name"===e.key)).value,password:e.find((e=>"password"===e.key)).value,password_repeat:e.find((e=>"passwordRepeat"===e.key)).value,custom_fields:JSON.stringify({custom_field_7069:e.find((e=>"telegram"===e.key)).value,custom_field_3938:e.find((e=>"text"===e.key)).value})};request({url:CONSTS.api.autor,method:"POST",data:a,callBack:e=>{t(e)}})}),(()=>{e.openModal("autor1")}))}))})()})(e)},hideLoader=()=>{document.querySelector(".loader").classList.remove("active")},init=()=>{const e=modal();header(),sliders(),inputsAndForms(e)};window.addEventListener("DOMContentLoaded",init),window.addEventListener("load",hideLoader);