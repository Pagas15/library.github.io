// Was made by Pagas15
// My site - https://pagas15.github.io

const sliers = () => {
	let wsw = window.innerWidth;
	let wsd, ttr;
	if(wsw >= 1600){
		wsd = 4;
	} else if (wsw <= 1600 && wsw >= 1200) {
		wsd = 3;
	} else if (wsw <= 1200 && wsw >= 576) {
		wsd = 2;
	} else if (wsw <= 576) {
		wsd = 1;
	}
	if(wsw >= 992){
		ttr = 3;
	} else if (wsw <= 992 && wsw >= 576) {
		ttr = 2;
	} else if (wsw <= 576) {
		ttr = 1;
	}

	let advantagesSwiper = new Swiper('.advantages-slider', {
		autoplay: {
			delay: 5000,
		},
		direction: 'horizontal',
		slidesPerView: ttr,
		spaceBetween: 0,
		pagination: {
			el: '.swiper-pagination',
			clickable: true,
		},
		navigation: {
			nextEl: '.swiper-button-next',
			prevEl: '.swiper-button-prev',
		},
		loop: true,
	});
	let sliderStatic = new Swiper('.slider-static__slider', {
		autoplay: {
			delay: 4000,
		},
		direction: 'horizontal',
		slidesPerView: wsd,
		spaceBetween: 0,
		loop: true,
	});
};

const accordion = (elemList, elemItem, elemBtn) => {
	if(document.querySelector(elemList)){
		let listItem = document.querySelectorAll(elemItem);
		document.querySelector(elemList).addEventListener('click',e=>{
			e.preventDefault();
			let elem = e.target;
			if(elem.closest(elemBtn)){
				let elemPar = elem.closest(elemItem);
				if(elemPar.classList.contains('active')){
					listItem.forEach(item=>{
						item.classList.remove('active')
					})
				} else {
					listItem.forEach(item=>{
						item.classList.remove('active')
					})
					elemPar.classList.add('active')
				}
			}
		})
	}
}

const clickBel = (elemBtn, elemItem, classElem, btnTr = false) => {
	if(document.querySelector(elemBtn)){
		let btnElem = document.querySelector(elemBtn),
		itemElem = document.querySelector(elemItem);
		btnElem.addEventListener('click', e=>{
			e.preventDefault();
			itemElem.classList.toggle('active');
			if(btnTr){
				btnElem.classList.toggle('active');
			}
		})
		itemElem.addEventListener('click', e=>{
			e.preventDefault();
			if(e.target.classList.contains(classElem)){
				itemElem.classList.remove('active');
				if(btnTr){
					btnElem.classList.remove('active');
				}
			};
		});
	}
};

const selecter = () => {
	document.querySelectorAll('.select').forEach(item=>{
		item.addEventListener('click',e=>{
			let elem = e.target;
			if(elem.closest('.select__btns') || elem.closest('.select::before')){
				item.classList.toggle('active');
			}
			if (elem.closest('.select__btn')) {
				let sad = elem.closest('.select__btn');
				let ipt = item.querySelector('.select__btns')
				item.classList.remove('active');
				ipt.innerHTML = sad.innerHTML;
				ipt.dataset.value = sad.dataset.name;
			}
		})
	})
}
const tabs = (elemWrap,elemBtn,elemTab) => {
	document.querySelectorAll(elemWrap).forEach(item=>{
		item.addEventListener('click',e=>{
			if((e.target.classList.contains(elemBtn)) && !(e.target.classList.contains('active'))){
				item.querySelectorAll(`.${elemBtn}`).forEach(itesa=>{itesa.classList.remove('active')});
				e.target.classList.add('active')
				item.querySelectorAll(elemTab).forEach(itesa=>{itesa.classList.remove('active')});
				item.querySelector(`[data-idTab="${e.target.dataset.id}"]`).classList.add('active')
			}
		})
	})
}

const header = () => {
	const addHeaderAdapt = () => {
		console.log(2);
		if(window.innerWidth <= 1200 && window.innerWidth > 720){
			clickBel('#nav-btn', "#nav-bar", 'nav-bar__btn', true);
		}
		if(window.innerWidth <= 720){
			let btnElem = document.querySelector('#nav-btn'),
					itemElem = document.querySelector('#header__nav-bares');
			btnElem.addEventListener('click', e=>{
				e.preventDefault();
				itemElem.classList.toggle('active');
				btnElem.classList.toggle('active');
			})
			itemElem.addEventListener('click', e=>{
				e.preventDefault();
				if(!(e.target.dataset.how)){
					itemElem.classList.remove('active');
					btnElem.classList.remove('active');
				}
			});
		}
	}
	addHeaderAdapt();
	// window.addEventListener('resize', ()=>{
	//	 if(window.innerWidth <= 1200 && window.innerWidth > 720){
	//		 window.location.reload()
	//	 }
	//	 if(window.innerWidth <= 720){
	//		 window.location.reload()
	//	 }
	// })
}

const passHide = () => {
	document.querySelectorAll('.inputBox--row-i .icon-sr-eye').forEach(item=>{
		let parBtn = item.closest('.inputBox--row-i');
		let inp = parBtn.querySelector('input');
		item.addEventListener('click', ()=>{
			if(inp.type === 'password'){
				inp.type = 'text';
			} else {
				inp.type = 'password';
			}
		})
	})
}


document.querySelectorAll('.btn-ro').forEach(item=>{
	item.addEventListener('click',e=>{
		e.preventDefault()
	})
})

const popUps = () => {
	document.querySelectorAll('[data-btnPop]').forEach(item=>{
		item.addEventListener('click',e=>{
			e.preventDefault();
		})
	})
	let elem = document.querySelector('#popUp');
	document.querySelector('#popUp').addEventListener('click', e=>{
		if((e.target.classList.contains('popUp') && e.target.classList.contains('active'))){
			elem.classList.remove('active');
			elem.querySelectorAll('.popUp__block').forEach(item=>{
				item.classList.remove('active');
			});
		}
		if(e.target.closest('.popUp__exit') || e.target.dataset.closepopup){
			e.preventDefault();
			elem.classList.remove('active');
			e.target.closest('.popUp__block').classList.remove('active');
		}
	})
	const openPopUp = (elemBtn, blockPop) => {
		document.querySelectorAll(elemBtn).forEach(item=>{
			item.addEventListener('click',()=>{
				elem.querySelectorAll('.popUp__block').forEach(item=>{
					item.classList.remove('active');
				});
				elem.classList.add('active');
				if(blockPop !== undefined)
				document.querySelector(blockPop).classList.add('active')
			})
		})
	}
	openPopUp("[data-btnPop='logInBtn']", "[data-idBlock='logInPop']");
	openPopUp("[data-btnPop='joinBtn']", "[data-idBlock='joinPop']");
	openPopUp("[data-btnPop='resetBtn']", "[data-idBlock='resetPassPop']");


}

const init = () => {
	clickBel('#langBtn', "#langList", 'option__opt-btn');
	clickBel('#valBtn', "#valList", 'option__opt-btn');
	clickBel('#nav-btsaw', "#navAtc", 'option__opt-btn');
	header();
	sliers();
	accordion('#faq__atr-list','.faq__atr-item','.faq__atr-btn');
	selecter();
	tabs('.vars__tabs','vars__nav-btn','.vars__block-item');
	tabs('.popUp__tabs-wrap','popUp__tab-btn','.popUp__tab');
	passHide();
	popUps();
};


window.addEventListener('DOMContentLoaded', init)