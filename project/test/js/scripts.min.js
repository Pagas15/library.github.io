// Was made by Pagas15
// My site - https://pagas15.github.io

// const { active } = require("browser-sync");
var volumeCount=0.5
let heightCard = 0;
var animateForm = true;
if(window.innerWidth < 769){
  heightCard = 162;
};
var dur = 205;
var mq = false;
function runRow() {
    var i = 0;
    mq = $(".marquee")
        .marquee({ speed: dur, delayBeforeStart: 0 })
        .bind("finished", function (e) {
            if ($("#last_run_element").offset().left <= -130) {
                mq.marquee("destroy");
                $(".marquee span").hide();
                $(".marquee .jackpot-view").show(200);
                setTimeout(function () {
                    $(".marquee span").each(function () {
                        if ($(this).hasClass("jackpot-view")) {
                            $(this).hide();
                        } else {
                            $(this).show();
                        }
                    });
                    runRow();
                }, 60000);
            }
        });
}
function startJackPot(){
  setInterval(function(){
    $('.jackpot-view').each(function(){
      var j=$(this).find('b').text().replace(',','');j=parseFloat(j);
      j+=0.01;j=(new Intl.NumberFormat('en-IN',{minimumFractionDigits:2}).format(j));
      $(this).find('b').text(j);
    })
  },20);
}
function btnArrows(){
  const arrPrev = document.querySelector('.nav-bar__arrow-prev'),
        arrBodyPrev = document.querySelector('.nav-bar__arrow-body-prev'),
        arrNext = document.querySelector('.nav-bar__arrow-next'),
        arrBodyNext = document.querySelector('.nav-bar__arrow-body-next');
  const addEffectArrow = (arrName, bodyName) => {
    arrName.addEventListener('mousedown',e=>{
      e.preventDefault();
      bodyName.classList.add('activeAct');
    });
    arrName.addEventListener('mouseup',e=>{
      playSound('4');
      e.preventDefault();
      bodyName.classList.remove('activeAct');
    });
    arrName.addEventListener('mouseover',e=>{
      e.preventDefault();
      bodyName.classList.add('hoverAct');
    });
    arrName.addEventListener('mouseout',e=>{
      e.preventDefault();
      bodyName.classList.remove('hoverAct');
      bodyName.classList.remove('activeAct');
    });
  };
  addEffectArrow(arrPrev, arrBodyPrev);
  addEffectArrow(arrNext, arrBodyNext);
}
function videoBgInit(){
  var instance = new vidbg('.top-box__wrap', {
    mp4:'https://blackcazino.com/img/gif/new_style/Champ_club11.mp4',
    webm:'https://blackcazino.com/img/gif/new_style/Champ_club11.webm',
    poster:'https://blackcazino.com/img/logo_img_2.png',
    overlay:true,
    overlayColor:'#000',
    overlayAlpha:null
  },{});
}
function sliderInit(){
  $('.top-box__slider').slick({
    infinite:true,
    slidesToShow:1,
    slidesToScroll:1,
    speed:500,
    prevArrow:'.nav-bar__arrow-prev',
    nextArrow:'.nav-bar__arrow-next',
    edgeFriction:1,
  });
}


function playSound(filename){
  var sound=new Howl({src:['https://blackcazino.com/sound/'+filename+'_v1.mp3'],
      volume:volumeCount,});
  sound.play();}
function playSoundClick(){var sound=new Howl({src:['https://blackcazino.com/sound/click_btn_v1.mp3'],volume:volumeCount,});sound.play();}
function playMusic(){
  var volMusic=volumeCount;if(volMusic>0.3){volMusic=0.3}
  soundMusic=new Howl({src:['https://blackcazino.com/sound/1_v1.mp3'],volume:volMusic,loop:true,});soundMusic.play();}
// $(document).on('click','.sound-click', function(){playSound('click_btn');})


function ollAddNavBtn(){
  let bg = $('.top-box__wrapper');
  let listBtns = $('.nav-bar__btn');
  let speedEff = 600;
  function addNavBtn(itemBtn, itemBlock){
    let btnItem = $(itemBtn);
    let blockItem = $(itemBlock);
    btnItem.on('click', function(){
      playSound('3');
      let gsa1 = $('#logAcc').hasClass('active'),
          gsa2 = $('#setMain').hasClass('active'),
          tsest = false;
      blockItem.toggleClass('active');
      blockItem.toggle(600);
      bg.toggleClass('noActive');
      $('.top-box__wrapper.noActive').on('click', function(){
        playSound('3');
        let gsa3 = $('#logAcc').hasClass('active'),
            gsa4 = $('#setMain').hasClass('active');
        bg.removeClass('noActive');
        blockItem.removeClass('active');
        blockItem.hide(600);
        if(!gsa3){
          setTimeout(function(){ 
            $('.popup-wind__ollAcc').removeClass('active');
            $('.popup-wind__ollAcc').hide();
            $('#logAcc').show()
            $('#logAcc').animate({ right: "0px" }, 1);
            $('#logAcc').addClass('active');
          }, speedEff);
        }
        if(!gsa4){
          setTimeout(function(){ 
            $('.popup-wind__wsa').hide();
            $('.popup-wind__wsa').removeClass('active');
            $('#setMain').show()
            $('#setMain').animate({ right: "0px" }, 1);
            $('#setMain').addClass('active');
          }, speedEff);
        }
        tsest = true;
        if(blockItem.hasClass('active')){
          listBtns.addClass('noActiveBtn');
        } else {
          listBtns.removeClass('noActiveBtn');
        }
      });
      if(!tsest){
        if(!gsa1){
          setTimeout(function(){ 
            animateToProc('.popup-wind__ollAcc','#logAcc');
          }, speedEff);
        };
        if(!gsa2){
          setTimeout(function(){ 
            animateToProc('.popup-wind__wsa','#setMain');
          }, speedEff);
        };
        tsest = false;
      }
      if(blockItem.hasClass('active')){
        listBtns.addClass('noActiveBtn');
      } else {
        listBtns.removeClass('noActiveBtn');
      }
      btnItem.removeClass('noActiveBtn');
    })
  }
  addNavBtn('.nav-bar__credit', '.popup-wind__credit');
  addNavBtn('.nav-bar__language', '.popup-wind__lang');
  addNavBtn('.nav-bar__mess-btn', '.popup-wind__mesg');
  addNavBtn('.nav-bar__login-btn', '.popup-wind__play-code');
  addNavBtn('.nav-bar__setting', '.popup-wind__setting');
  addNavBtn('.nav-bar__volume-btn', '.popup-wind__volume');
}
function animateFormProc(hideForm, showForm) {
  if (animateForm) {
    animateForm = false;
    $(hideForm).animate({ right: "-1000px" }, 800).hide(0);
    setTimeout(() => {
      $(hideForm).removeClass('active');
    }, 800);
    if (showForm !== false) {
      $(showForm).css("right", "-1000px").show(0).addClass("active");
      $(showForm).animate({ right: "0px" }, 800);
    }
    animateForm = true;
    $(hideForm).removeAttr("active");
  }
}
function animateToProc(hideForm, showForm){
  $(hideForm).animate({ right: "-1000px" }, 400).hide(0);
  setTimeout(() => {
    $(hideForm).removeClass('active');
  }, 400);
  $(showForm).css("right", "-1000px").show(0).addClass("active");
  $(showForm).animate({ right: "0px" }, 600);
  setTimeout(() => {
    $(hideForm).addClass('active');
  }, 600);
  $(hideForm).removeAttr("active");
}
function animateRightTo(button, hideForm, showForm) {
  $(document).on("click", button, function () {
    animateToProc(hideForm, showForm);
  });
}

function animateRightFrom(button, hideForm, showForm) {
  $(document).on("click", button, function () {
      animateFormProc(hideForm, showForm);
  });
}

function tabsBigs(){
  
  animateRightTo('.back-chat-log','.popup-wind__ollAcc','#logAcc');
  animateRightTo('.back-chat-set','.popup-wind__wsa','#setMain');
  animateRightFrom('#acceptTerms','#logNew','#logAcceptTerms');
  animateRightFrom('#topay','#logAcc','#topay-block');
  animateRightFrom('#navConditions','#logAcc','#logPass');
  animateRightFrom('#reg-page-btn','#logAcc','#logNew');
  animateRightFrom('#navRol','#setMain','#setBeck');
  animateRightFrom('#navAct','#setMain','#setAct');
  animateRightFrom('#navAbout','#setMain','#setAbout');
  animateRightFrom('#navHist','#setMain','#setHist');
  animateRightFrom('#navSet','#setMain','#setSet');
  animateRightFrom('#navCondda','#setMain','#setConditions');
  animateRightFrom('#navPolitic','#setMain','#setPolitic');
  animateRightFrom('#rollback-link-action','#setBeck','#setAct');
  animateRightFrom('#to_rollback_page_link','#setAbout','#setBeck');
  animateRightFrom('#to_double_cash_page_link','#setAbout','#setAct');
  animateRightFrom('#to_second_chance_page_link','#setAbout','#setAct');
  animateRightFrom('#to_action_page_link','#setAbout','#setAct');
};

function codesCheck(){
  let lister = document.querySelectorAll('label.row-wrap');
  lister.forEach(item=>[
    item.addEventListener('click', ()=>{
      document.querySelectorAll('.popup-wind__input').forEach(sit=>{
        sit.classList.remove('active')
      });
      item.querySelector('.popup-wind__input').classList.add('active')
    })
  ]);
};
function ckecbox(){
  let items = document.querySelectorAll('.popup-wind__input');
  items.forEach(item=>{
    item.addEventListener('click', ()=>{
      if(item.querySelector('input').checked == true){
        item.querySelector('input').checked = false;
        item.classList.remove('active');
      } else {
        item.querySelector('input').checked = true;
        item.classList.add('active');
      };
    });
  });

};


const init = () => {
  btnArrows();
  videoBgInit();
  document.querySelector('.logo-img').style.display = 'none';
  sliderInit();
  document.querySelector('.top-box__position').style.height = document.querySelector('.top-box__wrapper').offsetHeight  - document.querySelector('.top-box__slider-wrap').offsetHeight - heightCard-38 + 'px';
  document.querySelector('.top-box__slider-wrap').style.height = heightCard + 'px';
  ollAddNavBtn();
  codesCheck();
  tabsBigs();
  playMusic();
  ckecbox();
  // if(hidePreloader){preloadOff();}
  var sliderVolume=document.getElementById('volume-slider');
  noUiSlider.create(sliderVolume,{
    start:[50],
    connect:[true,true],
    orientation:'vertical',
    direction:'rtl',
    padding:[4,5],
    step:1,
    range:{'min':0,'max':100},
    format:{to:function(value){
        return parseInt(value);
      },from:function(value){
        return parseInt(value);
      }
    }
  });
  const resetButton=document.getElementById('popup-wind__volume-reset');
  resetButton.onclick=function(e){
    sliderVolume.noUiSlider.set([1]);
    volumeCount=0;
    if(typeof soundMusic!='undefined'){
      soundMusic.volume(volumeCount);
    }
    resetButton.classList.add('reset_active');
  }
  sliderVolume.noUiSlider.on('start',function(values,handle){
    volumeCount=values/100;
  });
  sliderVolume.noUiSlider.on('change',function(values,handle){
    if(values<=5){
      volumeCount=0.0;
      resetButton.classList.add('reset_active');
    }else{
      volumeCount=values/100;
      resetButton.classList.remove('reset_active');
    };
    soundMusic.volume(volumeCount);
  });

  runRow();
  startJackPot();
};


window.addEventListener('DOMContentLoaded', init)