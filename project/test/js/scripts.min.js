// Was made by Pagas15
// My site - https://pagas15.github.io


const lines = (elem) => {
  if(document.querySelector(elem))
  document.querySelectorAll(elem).forEach(item=>{
    item.appendChild(item.querySelector('.lineSt__ch').cloneNode(true))
  })
}

const menu = () => {
  let btn = document.querySelector('.header__btn');
  let menu = document.querySelector('.header__wrap')
  if(btn && menu){
    btn.addEventListener('click', e => {
      e.preventDefault();
      btn.classList.toggle('active');
      menu.classList.toggle('active');
      body.classList.toggle('overflow')
    })
  }
  if(btn){
    let pos = false;
    const ifer = () => window.innerWidth < 992 ? pos = true : pos = false;
    const ifer2 = () => window.pageYOffset > 60 && pos ? btn.classList.add('lineBtn') : btn.classList.remove('lineBtn');
    ifer();
    ifer2();
    window.addEventListener('resize', ()=>{ifer(); ifer2()})
    window.addEventListener('scroll',()=>{ifer2()})
  }
}

const swiperHowWork = () => {
  if(document.querySelector('.howWork__slider')){
    const swiper = new Swiper('.howWork__slider', {
      // direction: 'vertical',
      loop: true,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      centeredSlides: true,
      spaceBetween: 20,
      slidesPerView: 'auto',

    })
  }
}

const swiperCompo = () => {
  if(document.querySelector('.composition__slider')){
    const swiperComposition = new Swiper('.composition__slider', {
      // direction: 'vertical',
      loop: true,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      centeredSlides: true,
      spaceBetween: 20,
      slidesPerView: 'auto',

    })
  }
}

const tabs = wrapper => {
  let elemWrap = document.querySelector(wrapper);
  if(elemWrap){
    let listBtn = elemWrap.querySelectorAll('[data-btnPage]');
    let wrapPage = elemWrap.querySelector('.servSel__wrapTabs');
    let listPage = wrapPage.querySelectorAll('[data-page]');
    listBtn.forEach(item => {
      item.addEventListener('click', e => {
        e.preventDefault();
        if(!(item.classList.contains('active'))){
          listBtn.forEach(item => item.classList.remove('active'));
          item.classList.add('active');
          listPage.forEach(item => item.classList.remove('active'));
          wrapPage.querySelector(`[data-page="${item.dataset.btnpage}"]`).classList.add('active');
        }
      })
    })
  }
}

const hidder = elem => {
  let wrap = document.querySelector(elem);
  if(wrap){
    let btn = wrap.querySelector('.btn--dark');
    if(wrap && btn){
      btn.addEventListener('click', e=>{
        e.preventDefault();
        wrap.classList.toggle('hide');
      })
    }
  }
}

const init = () => {
  lines('.lineSt__list');
  menu();
  // swiperHowWork();
  swiperCompo();
  tabs('#servSel1');
  hidder('#hidder');
}


window.addEventListener('DOMContentLoaded', init)